metadata:
  name: "Deep Farey Storage"
  version: "1.0"
  timestamp: "2024-03-23T02:00:00Z"
  description: "Schema for storing massive Farey sequences"

storage:
  format: "chunked"
  chunk_size: 1000000  # 1M nodes per chunk
  compression: "zstd"
  indexing:
    method: "b-tree"
    key_size: 16  # bytes
    max_depth: 8

chunks:
  - id: "chunk_0"
    range: [0, 1000000]
    file: "chunks/chunk_0.zstd"
    index: "indices/chunk_0.idx"
    metadata:
      node_count: 1000000
      min_denominator: 1
      max_denominator: 1000
      checksum: "sha256:..."

  - id: "chunk_1"
    range: [1000001, 2000000]
    file: "chunks/chunk_1.zstd"
    index: "indices/chunk_1.idx"
    metadata:
      node_count: 1000000
      min_denominator: 1001
      max_denominator: 2000
      checksum: "sha256:..."

indexing:
  primary:
    type: "denominator"
    structure: "b-tree"
    file: "indices/denominator.idx"
  
  secondary:
    - type: "value"
      structure: "r-tree"
      file: "indices/value.idx"
    - type: "egyptian"
      structure: "inverted-index"
      file: "indices/egyptian.idx"

query_optimization:
  cache:
    size: "4GB"
    strategy: "lru"
  prefetch:
    enabled: true
    window: 5  # chunks
  parallel:
    max_threads: 8
    chunk_size: 100000

performance_metrics:
  read_latency: "5ms"
  write_latency: "50ms"
  compression_ratio: 0.3
  index_size: "2GB"
  total_size: "10GB"
  nodes_per_second: 1000000

visualization:
  level_of_detail:
    - level: 0
      node_count: 1000
      detail: "full"
    - level: 1
      node_count: 10000
      detail: "reduced"
    - level: 2
      node_count: 100000
      detail: "sampled"
    - level: 3
      node_count: 1000000
      detail: "statistical" 